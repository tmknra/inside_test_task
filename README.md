# inside_test_task

Проект является тестовым заданием от [ООО "ИНСАЙД"](http://www.the-inside.info)

Технологии и библиотеки, использованные в проекте:
-	Java 17
-	Spring Framework
-	PostgreSQL
-	Gradle
-	Liquibase
-	Lombok
-	Docker
-	Junit5
-	Mockito

Для запуска проект необходимо склонировать целиком, либо вытащить из репозитория файл docker-compose.yaml.
- Для локального запуска требуются: Java 17, PostgreSQL, а также созданная база данных (необходимо изменить переменные БД 
в файле application.properties).
- Для запуска через Docker контейнер требуются установленный Docker и файл docker-compose.yaml. Требуется ввести в терминале
  команду:
  docker-compose up -d
  находясь в корневой директории приложения, либо в директории, куда был сохранен файл docker-compose.yaml.
  Приложение и БД развернутся в Docker контейнере.

Для проверки работоспособности можно воспользоваться [curl запросами](curl_requests).

Приложение имеет два эндпоинта:

1) POST /login
   Сервер принимает от клиента JSON вида:
   {
     name:"имя отправителя",
     password: "пароль"
   }
   Проверяет введенный пароль по базе данных, при его корректности создает JWT токен. В токен записывается поле name.
   Выбран алгоритм HMAC256. Срок действия не определен, что соответствует условию задания.
   На выход отдается JSON вида:
   {
     token: "тут сгенерированный токен"
   }
2) POST /messages/send
   Сервер слушает и отвечает, на вход поступают данные JSON вида:
   {
     name:       "имя отправителя",
     message:    "текст сообщение"
   }
   В заголовке 'AUTHORIZATION' указан Bearer токен, полученный из эндпоинта выше (между Bearer и полученным токеном
   нижнее подчеркивание).
   Сервер проверяет токен, в случае успешной проверки токена, полученное сообщение сохраняется в БД.

   Если пришло сообщение вида:
   {
     name:       "имя отправителя",
     message:    "history N"
   }
   Проверяется токен, в случае успешной проверки токена на выход отдается N последних сообщений из БД.

